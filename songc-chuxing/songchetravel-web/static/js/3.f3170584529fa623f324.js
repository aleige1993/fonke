webpackJsonp([3],{1036:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{placeholder:{type:String,default:"请选择门店范围"},selectOption:{type:Array,default:[]},value:{type:Array,default:[]}},data:function(){return{tpData:[],showData:[],searchLevel:0,isChange:!1}},mounted:function(){this.reload()},methods:{reload:function(){if(this.showData=[],this.tpData=[],this.value.length)for(var e in this.value)console.log(this.levelcodeToArray(this.value[e])),this.search(this.selectOption,this.levelcodeToArray(this.value[e]))},change:function(e){this.tpData=e},add:function(){if(-1!==this.value.indexOf(this.tpData[this.tpData.length-1]))return this.$message({type:"warning",message:"不能重复添加！"}),!1;this.isChange=!0,this.value.push(this.tpData[this.tpData.length-1]),this.search(this.selectOption,this.levelcodeToArray(this.tpData[this.tpData.length-1]))},close:function(e,t){this.isChange=!0,this.value.splice(t,1),this.showData.splice(t,1)},strLength:function(e){var t=new RegExp("/","g"),a=e.match(t);return a?a.length:0},search:function(e,t){var a=this;for(var r in e)a.strLength(e[r].value)!==a.searchLevel+1&&(a.searchLevel=a.strLength(e[r].value)-1),e[r].value===t[a.searchLevel]&&(a.searchLevel===t.length-1?(a.searchLevel=0,a.showData.push(e[r].label)):(a.searchLevel+=1,a.search(e[r].children,t)))},levelcodeToArray:function(e){if(!e)return[];var t=e.split("/"),a=[];return t.length=t.length-1,t.forEach(function(e){a.push(a[a.length-1]?a[a.length-1]+e+"/":e+"/")}),a}},watch:{value:function(e){this.isChange?this.isChange=!1:this.reload()}}}},1057:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(283),o=r(i),n=a(812),l=r(n),s=a(811),d=(r(s),a(815)),c=r(d),u=a(282),f=r(u),p=a(281),m=r(p),h=a(818),v=a(829),g=a(1162),y=r(g),b=a(1076);t.default={components:{LevelMulpite:y.default},data:function(){var e=this,t=this,a=function(t,a,r){1===e.formEdit.type&&""===a?r(new Error("请输入优惠百分比")):r()},r=function(t,a,r){2===e.formEdit.type&&""===a?r(new Error("请输入优惠金额")):r()},i=function(t,a,r){3===e.formEdit.type&&a===[]?r(new Error("请选择关联的优惠券")):r()},o=function(t,a,r){3===e.formAdd.type&&a===[]?r(new Error("请选择关联的优惠券")):r()},n=function(t,a,r){3!==e.formEdit.type&&a===[]?r(new Error("请选择门店范围")):r()},l=function(t,a,r){3!==e.formAdd.type&&a===[]?r(new Error("请选择门店范围")):r()},s=function(t,a,r){3!==e.formEdit.type&&a===[]?r(new Error("请选择车型范围")):r()},d=function(t,a,r){3!==e.formAdd.type&&a===[]?r(new Error("请选择车型范围")):r()};return{filterData:[{key:"name",type:"input",placeholder:"活动名称"},{key:"begin_time",type:"date",placeholder:"开始时间",change:function(e){t.filterParams.begin_time=e}},{key:"end_time",type:"date",placeholder:"结束时间",change:function(e){t.filterParams.end_time=e}},{key:"statue",type:"radio",placeholder:"活动状态",option:[{key:0,value:"未开始"},{key:1,value:"活动中"},{key:2,value:"已结束"}]}],filterParams:{name:"",begin_time:"",end_time:"",statue:""},tableList:[{key:"name",value:"活动名称"},{key:"type",value:"活动类型",type:"icon",start:1,icon:["&#xe650;","&#xe6af;","&#xe81d;"],name:["百分比优惠","固定金额优惠","领取优惠券"],color:["blue","orange","green"]},{key:"whether_stack",value:"是否和优惠券叠加",type:"boolean",icon:["&#xe6b3;","&#xe63d;"],name:["否","是"],color:["red","green"]},{key:"statue",value:"活动状态",type:"dot",start:0,name:["未开始","活动中","已结束"],color:["red","green","gray"]},{key:"content",value:"活动内容"}],opreat:[{type:"edit",name:"编辑",roles:!1,click:function(e,a){t.edit(e,a)}},{type:"cancel",name:"终止",roles:!1,statue:[0,1],status:"statue",click:function(e,a){t.cancel(e,a)}},{type:"delete",name:"删除",roles:!1,statue:[2],status:"statue",click:function(e,a){t.delete(e,a)}}],keyword:{},pageParams:{rows:15,page:1},APIADDRESS:m.default,baseImgUrl:"http://sirui-img.oss-cn-hangzhou.aliyuncs.com/",addFormVisible:!1,editFormVisible:!1,formLabelWidth:"120px",editLoading:!1,AddLoading:!1,couponList:[],beforeToday:{disabledDate:function(e){return e.getTime()>Date.now()-864e5}},detialDic:[{key:"create_time",value:"创建时间"},{key:"begin_time",value:"开始时间"},{key:"end_time",value:"结束时间"},{key:"username",value:"操作人员名称"}],endTimeOption:{disabledDate:function(e){return e.getTime()<new Date(t.formAdd.end_time)-864e5}},formAdd:{name:"",begin_time:"",end_time:"",vmids:[],range_levelcode:[],type:"",percentage:"",amount:"",whether_stack:!1,des_img_url:"",couponid:[]},formEdit:{name:"",begin_time:"",end_time:"",vmids:[],range_levelcode:[],type:"",percentage:"",amount:"",whether_stack:!1,des_img_url:"",couponid:[]},ruleEdit:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],begin_time:[{required:!0,message:"请选择开始时间",trigger:"change"}],end_time:[{required:!0,message:"请选择结束时间",trigger:"change"}],vmids:[{validator:s,trigger:"change"}],range_levelcode:[{validator:n,trigger:"change"}],percentage:[{validator:a,trigger:"blur"}],amount:[{validator:r,trigger:"blur"}],couponid:[{validator:i,trigger:"change"}],des_img_url:[{required:!0,message:"请选择图片",trigger:"change"}]},ruleAdd:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],begin_time:[{required:!0,message:"请选择开始时间",trigger:"change"}],end_time:[{required:!0,message:"请选择结束时间",trigger:"change"}],vmids:[{validator:d,trigger:"change"}],range_levelcode:[{validator:l,trigger:"change"}],percentage:[{validator:a,trigger:"blur"}],amount:[{validator:r,trigger:"blur"}],couponid:[{validator:o,trigger:"change"}],des_img_url:[{required:!0,message:"请选择图片",trigger:"change"}]},formSch:{name:"",begin:"",end:"",statue:""},levelcodeOptions:[],schLevelcodeOptions:[],vmOptions:[],roleData:[],pageIndex:1,pageSize:20,total:0,tableData:[],roles:{}}},mounted:function(){this.$nextTick(function(){var e=this;this.getData(),this.$store.dispatch("checkApi",["/sys/org/querySelfAndChildren","/car/vehicleModel/getVmList","/activitity/coupon/getCouponByMode"]).then(function(t){t[0]?e.getLevelcodeOptions():console.log("“/sys/org/querySelfAndChildren”接口无权限"),t[1]?e.getVmList():console.log("“/car/vehicleModel/getVmList”接口无权限"),t[2]?e.getCouponList():console.log("“/activitity/coupon/getCouponByMode”接口无权限")}),this.rolesMethod()})},methods:{rolesMethod:function(){var e=this;e.$store.dispatch("checkApi",["/activitity/active/add","/activitity/active/update","/activitity/active/delete","/activitity/active/cancel"]).then(function(t){e.roles={add:t[0]},e.opreat[0].roles=t[1],e.opreat[1].roles=t[2],e.opreat[2].roles=t[3]})},clearFormAdd:function(){this.formAdd={name:"",begin_time:"",end_time:"",vmids:[],range_levelcode:[],type:"",percentage:"",amount:"",whether_stack:!1,des_img_url:"",couponid:[]}},getCouponList:function(){var e=this;(0,v.GetCouponByMode)({promotion_mode:0}).then(function(t){e.couponList=t.data.entity.list})},delete:function(e,t){var a=this;this.$confirm("确定删除活动, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(0,b.activeDelete)({activitityid:t.activitityid}).then(function(e){0===e.data.result.resultCode?(a.$message({type:"success",message:"恭喜，删除成功！"}),a.getData()):a.$message.error(e.data.result.resultMessage)})})},cancel:function(e,t){var a=this;this.$confirm("确定终止活动, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(0,b.activeCancel)({activitityid:t.activitityid}).then(function(e){0===e.data.result.resultCode?(a.$message({type:"success",message:"恭喜，终止成功！"}),a.getData()):a.$message.error(e.data.result.resultMessage)})})},handleAddPic:function(e,t){this.formAdd.des_img_url=e.entity?e.entity.url:""},handleEditPic:function(e,t){this.formEdit.des_img_url=e.entity?e.entity.url:""},editBegin:function(e){this.formEdit.begin_time=e},editEnd:function(e){this.formEdit.end_time=e},addBegin:function(e){this.formAdd.begin_time=e},addEnd:function(e){this.formAdd.end_time=e},getLevelcodeOptions:function(){var e=this;c.default.post(m.default+"/sys/org/querySelfAndChildren",{},function(t){e.levelcodeOptions.length=0,e.levelcodeOptions=t.entity,e.schLevelcodeOptions=t.entity},function(){},this)},getVmList:function(e,t){var a=this;c.default.post(m.default+"/car/vehicleModel/getVmList",{},function(e){e.entity&&e.entity.length>0&&(a.vmOptions=e.entity)},function(){},this)},endChange:function(e){this.formEdit.end_time=e},beginChange:function(e){this.formEdit.begin_time=e},edit:function(e,t){this.editFormVisible=!0,this.formEdit=JSON.parse((0,l.default)(t)),this.formEdit.range_levelcode=(0,h.split)(this.formEdit.range_levelcode),this.formEdit.vmids=(0,h.split)(this.formEdit.vmids),this.formEdit.couponid=(0,h.split)(this.formEdit.couponid,"number")},search:function(){this.keyword={};var e=["rows","page"];for(var t in this.filterParams)this.filterParams[t]&&e.indexOf(t)<0&&(this.keyword[t]=this.filterParams[t]);this.getData()},SubmitEdit:function(){var e=this,t=(0,h.dataTranstion)(e.formEdit,["range_levelcode","vmids","couponid"]);t.name=(0,h.trim)(t.name),e.$refs.formEdit.validate(function(a){a&&(e.editLoading=!0,(0,f.default)({url:m.default+"/activitity/active/update",method:"post",params:t}).then(function(t){e.editLoading=!1,0===t.data.result.resultCode?(e.$message({type:"success",message:"编辑成功！"}),e.editFormVisible=!1,e.getData()):e.$message.error(t.data.result.resultMessage)}).catch(function(){e.editLoading=!1}))})},SubmitAdd:function(){var e=this,t=(0,h.dataTranstion)(e.formAdd,["range_levelcode","vmids","couponid"]);t.name=(0,h.trim)(t.name),e.$refs.formAdd.validate(function(a){a&&(e.AddLoading=!0,(0,f.default)({url:m.default+"/activitity/active/add",method:"post",params:t}).then(function(t){var a=t.data.result;e.AddLoading=!1,0===a.resultCode?(e.$message({type:"success",message:"恭喜，新增成功！"}),e.addFormVisible=!1,e.clearFormAdd(),e.getData()):e.$message.error(a.resultMessage)}).catch(function(){e.AddLoading=!1}))})},getData:function(){var e=this;(0,b.activeList)((0,o.default)(this.filterParams,this.pageParams)).then(function(t){var a=t.data.entity;e.tableData=a?a.list:[],e.total=a?a.totalRow:0})},pageChange:function(e,t){this.pageParams.rows=e,this.pageParams.page=t,this.getData()},add:function(){this.addFormVisible=!0},handleLevelChange:function(e){var t=e[e.length-1];this.getRoleData(t),this.formAdd.levelcode=t},handleAddLevelChange:function(e){console.log(e)},handleEditLevelChange:function(e){this.formEdit.levelcode.push(e)},handleAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("success submit!!"),t.addSave()})},beforeAvatarUpload:function(e){console.log("file::"+(0,l.default)(e));var t="image/jpeg"===e.type,a="image/gif"===e.type,r="image/png"===e.type,i=t||a||r,o=e.size/1024/1024<1;return i||this.$message.error("图片只能是 JPG GIF PNG 格式!"),o||this.$message.error("图片大小不能超过 1MB!"),i&&o},handleSchLevelChange:function(e){var t="";e&&(t=e[e.length-1],this.formSch.levelcode=t+"")},goCancelAdd:function(){this.addFormVisible=!1,this.$refs.formAdd&&this.$refs.formAdd.resetFields()},goCancelEdit:function(){this.editFormVisible=!1,this.$refs.formEdit&&this.$refs.formEdit.resetFields()}}}},1076:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,c.default)({url:f.default+"/activitity/active/list",method:"get",params:e})}function o(e){return(0,c.default)({url:f.default+"/activitity/active/update",method:"get",params:e})}function n(e){return(0,c.default)({url:f.default+"/activitity/active/add",method:"get",params:e})}function l(e){return(0,c.default)({url:f.default+"/activitity/active/cancel",method:"get",params:e})}function s(e){return(0,c.default)({url:f.default+"/activitity/active/delete",method:"get",params:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.activeList=i,t.activeUpdate=o,t.activeAdd=n,t.activeCancel=l,t.activeDelete=s;var d=a(282),c=r(d),u=a(281),f=r(u)},1090:function(e,t,a){t=e.exports=a(802)(!1),t.push([e.i,".levelCodeWrap .el-cascader[data-v-1cd21ed7]{width:39.5%;display:inline-block}.levelCodeWrap .btn-wrap[data-v-1cd21ed7]{display:inline-block}.levelCodeWrap .tag-wrap .el-tag[data-v-1cd21ed7]{margin-right:5px}",""])},1117:function(e,t,a){t=e.exports=a(802)(!1),t.push([e.i,".activity .img-wrap[data-v-db042950]{padding-left:100px;position:relative;margin-top:10px}.activity .img-wrap .label[data-v-db042950]{color:#999;position:absolute;width:89px;text-align:right;left:0}.activity .img-wrap img[data-v-db042950]{max-width:200px}.activity .el-input[data-v-db042950],.activity .el-select .el-input[data-v-db042950],.activity .el-select[data-v-db042950]{width:100%}.activity .dialog-form .el-form-item[data-v-db042950]{width:47.5%;float:left}.activity .dialog-form .el-form-item[data-v-db042950]:nth-child(odd){margin-right:5%}.activity .dialog-form .el-form-item.full-item[data-v-db042950]{width:100%}.activity .el-dialog[data-v-db042950]{min-width:700px!important}.activity .showImg[data-v-db042950]{max-width:200px}.activity .type-wrap .iconfont[data-v-db042950]{font-size:22px;margin-right:5px;position:relative;top:3px}.activity .type-wrap.type1 .iconfont[data-v-db042950],.activity .type-wrap.type1[data-v-db042950]{color:#108ee9}.activity .type-wrap.type2 .iconfont[data-v-db042950],.activity .type-wrap.type2[data-v-db042950]{color:#f07023}.activity .type-wrap.type3 .iconfont[data-v-db042950],.activity .type-wrap.type3[data-v-db042950]{color:#00a854}.activity .stack-wrap .iconfont[data-v-db042950]{font-size:22px;margin-right:5px;position:relative;top:3px}.activity .stack-wrap.stacktrue .iconfont[data-v-db042950],.activity .stack-wrap.stacktrue[data-v-db042950]{color:#00a854}.activity .stack-wrap.stackfalse .iconfont[data-v-db042950],.activity .stack-wrap.stackfalse[data-v-db042950]{color:#f04134}.activity .statue-wrap .dot[data-v-db042950]{width:6px;height:6px;background-color:#d81f21;border-radius:50%;display:inline-block;position:relative;top:-2px;margin-right:5px}.activity .statue-wrap.statue0[data-v-db042950]{color:#f04134}.activity .statue-wrap.statue0 .dot[data-v-db042950]{background-color:#f04134}.activity .statue-wrap.statue1[data-v-db042950]{color:#00a854}.activity .statue-wrap.statue1 .dot[data-v-db042950]{background-color:#00a854}.activity .statue-wrap.statue2[data-v-db042950]{color:#999}.activity .statue-wrap.statue2 .dot[data-v-db042950]{background-color:#999}",""])},1128:function(e,t,a){var r=a(1090);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(803)("e1d243b0",r,!0)},1155:function(e,t,a){var r=a(1117);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(803)("7ba175e8",r,!0)},1162:function(e,t,a){function r(e){a(1128)}var i=a(17)(a(1036),a(1171),r,"data-v-1cd21ed7",null);e.exports=i.exports},1171:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-form-item__content levelCodeWrap"},[a("el-cascader",{attrs:{options:e.selectOption,placeholder:"请选择门店范围","change-on-select":""},on:{change:e.change},model:{value:e.tpData,callback:function(t){e.tpData=t},expression:"tpData"}}),e._v(" "),a("div",{staticClass:"btn-wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加门店")])],1),e._v(" "),a("div",{staticClass:"tag-wrap"},e._l(e.showData,function(t,r){return a("el-tag",{key:r,attrs:{closable:!0,type:"primary"},on:{close:function(a){e.close(t,r)}}},[e._v("\n\t\t"+e._s(t)+"\n\t\t")])}))],1)},staticRenderFns:[]}},1203:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"activity"},[a("lg-preview"),e._v(" "),a("m-filter",{attrs:{data:e.filterData,form:e.filterParams,add:e.roles.add},on:{search:e.search,add:e.add}}),e._v(" "),a("m-table",{attrs:{tableData:e.tableData,opreatWidth:110,tableList:e.tableList,localName:"activity_table",otherList:e.detialDic,keyword:e.keyword,opreat:e.opreat,total:e.total},on:{pageChange:e.pageChange}}),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("h2",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont c-blue"},[e._v("")]),e._v("添加")]),e._v(" "),a("el-form",{ref:"formAdd",staticClass:"dialog-form clearfix",attrs:{model:e.formAdd,rules:e.ruleAdd}},[a("el-form-item",{attrs:{label:"活动名称：","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入活动名称"},model:{value:e.formAdd.name,callback:function(t){e.$set(e.formAdd,"name",t)},expression:"formAdd.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间：","label-width":e.formLabelWidth,prop:"begin_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间",format:"yyyy-MM-dd HH:mm:ss"},on:{change:e.addBegin},model:{value:e.formAdd.begin_time,callback:function(t){e.$set(e.formAdd,"begin_time",t)},expression:"formAdd.begin_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间：","label-width":e.formLabelWidth,prop:"end_time"}},[a("el-date-picker",{attrs:{type:"datetime","picker-options":e.endTimeOption,placeholder:"结束时间",format:"yyyy-MM-dd HH:mm:ss"},on:{change:e.addEnd},model:{value:e.formAdd.end_time,callback:function(t){e.$set(e.formAdd,"end_time",t)},expression:"formAdd.end_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动类型：",prop:"type","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动类型"},model:{value:e.formAdd.type,callback:function(t){e.$set(e.formAdd,"type",t)},expression:"formAdd.type"}},[a("el-option",{attrs:{value:1,label:"百分比优惠"}}),e._v(" "),a("el-option",{attrs:{value:2,label:"固定金额优惠"}}),e._v(" "),a("el-option",{attrs:{value:3,label:"领取优惠券"}})],1)],1),e._v(" "),3!==e.formAdd.type?a("el-form-item",{attrs:{label:"车型范围：","label-width":e.formLabelWidth,prop:"vm"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择车型范围"},model:{value:e.formAdd.vmids,callback:function(t){e.$set(e.formAdd,"vmids",t)},expression:"formAdd.vmids"}},e._l(e.vmOptions,function(e){return a("el-option",{key:e.vmid,attrs:{label:e.name,value:e.vmid+""}})}))],1):e._e(),e._v(" "),1===e.formAdd.type?a("el-form-item",{attrs:{label:"百分比优惠：",prop:"percentage","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入百分比优惠"},model:{value:e.formAdd.percentage,callback:function(t){e.$set(e.formAdd,"percentage",t)},expression:"formAdd.percentage"}},[a("template",{slot:"append"},[e._v("%")])],2)],1):e._e(),e._v(" "),2===e.formAdd.type?a("el-form-item",{attrs:{label:"固定金额优惠",prop:"amount","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入固定金额优惠"},model:{value:e.formAdd.amount,callback:function(t){e.$set(e.formAdd,"amount",t)},expression:"formAdd.amount"}},[a("template",{slot:"append"},[e._v("￥")])],2)],1):e._e(),e._v(" "),3!==e.formAdd.type?a("el-form-item",{attrs:{label:"是否和优惠券叠加",prop:"whether_stack","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.formAdd.whether_stack,callback:function(t){e.$set(e.formAdd,"whether_stack",t)},expression:"formAdd.whether_stack"}})],1):e._e(),e._v(" "),3===e.formAdd.type?a("el-form-item",{attrs:{label:"关联的优惠券：",prop:"couponid","label-width":e.formLabelWidth}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择关联的优惠券"},model:{value:e.formAdd.couponid,callback:function(t){e.$set(e.formAdd,"couponid",t)},expression:"formAdd.couponid"}},e._l(e.couponList,function(e,t){return a("el-option",{key:t,attrs:{name:e.name,value:e.couponid,label:e.name}})}))],1):e._e(),e._v(" "),3!==e.formAdd.type?a("el-form-item",{staticClass:"full-item",attrs:{label:"门店范围：","label-width":e.formLabelWidth}},[a("level-mulpite",{attrs:{selectOption:e.schLevelcodeOptions},model:{value:e.formAdd.range_levelcode,callback:function(t){e.$set(e.formAdd,"range_levelcode",t)},expression:"formAdd.range_levelcode"}})],1):e._e(),e._v(" "),a("el-form-item",{staticClass:"full-item",attrs:{label:"活动内容：","label-width":e.formLabelWidth,prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"活动内容"},model:{value:e.formAdd.content,callback:function(t){e.$set(e.formAdd,"content",t)},expression:"formAdd.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片：","label-width":e.formLabelWidth,prop:"des_img_url"}},[a("el-upload",{staticClass:"m-avatar-uploader",attrs:{"on-success":e.handleAddPic,"thumbnail-mode":!0,action:e.APIADDRESS+"/sys/sys/uploadFile","show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.formAdd.des_img_url?a("img",{staticClass:"showImg",attrs:{src:e.baseImgUrl+e.formAdd.des_img_url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.goCancelAdd()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.AddLoading},on:{click:function(t){e.SubmitAdd()}}},[e._v(e._s(e.AddLoading?"上传中":"确 定"))])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.editFormVisible,"before-close":e.goCancelEdit},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("h2",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont c-green"},[e._v("")]),e._v("编辑")]),e._v(" "),a("el-form",{ref:"formEdit",staticClass:"dialog-form clearfix",attrs:{model:e.formEdit,rules:e.ruleEdit}},[a("el-form-item",{attrs:{label:"活动名称：","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入活动名称"},model:{value:e.formEdit.name,callback:function(t){e.$set(e.formEdit,"name",t)},expression:"formEdit.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间：","label-width":e.formLabelWidth,prop:"begin_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间",format:"yyyy-MM-dd HH:mm:ss"},on:{change:e.editBegin},model:{value:e.formEdit.begin_time,callback:function(t){e.$set(e.formEdit,"begin_time",t)},expression:"formEdit.begin_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间：","label-width":e.formLabelWidth,prop:"end_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间",format:"yyyy-MM-dd HH:mm:ss"},on:{change:e.editEnd},model:{value:e.formEdit.end_time,callback:function(t){e.$set(e.formEdit,"end_time",t)},expression:"formEdit.end_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动类型：",prop:"type","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择活动类型"},model:{value:e.formEdit.type,callback:function(t){e.$set(e.formEdit,"type",t)},expression:"formEdit.type"}},[a("el-option",{attrs:{value:1,label:"百分比优惠"}}),e._v(" "),a("el-option",{attrs:{value:2,label:"固定金额优惠"}}),e._v(" "),a("el-option",{attrs:{value:3,label:"领取优惠券"}})],1)],1),e._v(" "),3!==e.formEdit.type?a("el-form-item",{attrs:{label:"车型范围：","label-width":e.formLabelWidth,prop:"vm"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择车型范围"},model:{value:e.formEdit.vmids,callback:function(t){e.$set(e.formEdit,"vmids",t)},expression:"formEdit.vmids"}},e._l(e.vmOptions,function(e){return a("el-option",{key:e.vmid,attrs:{label:e.name,value:e.vmid+""}})}))],1):e._e(),e._v(" "),1===e.formEdit.type?a("el-form-item",{attrs:{label:"百分比优惠：",prop:"percentage","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入百分比优惠"},model:{value:e.formEdit.percentage,callback:function(t){e.$set(e.formEdit,"percentage",t)},expression:"formEdit.percentage"}},[a("template",{slot:"append"},[e._v("%")])],2)],1):e._e(),e._v(" "),2===e.formEdit.type?a("el-form-item",{attrs:{label:"固定金额优惠",prop:"amount","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入固定金额优惠"},model:{value:e.formEdit.amount,callback:function(t){e.$set(e.formEdit,"amount",t)},expression:"formEdit.amount"}},[a("template",{slot:"append"},[e._v("￥")])],2)],1):e._e(),e._v(" "),3!==e.formEdit.type?a("el-form-item",{attrs:{label:"是否和优惠券叠加",prop:"whether_stack","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"on-color":"#13ce66","off-color":"#ff4949"},model:{value:e.formEdit.whether_stack,callback:function(t){e.$set(e.formEdit,"whether_stack",t)},expression:"formEdit.whether_stack"}})],1):e._e(),e._v(" "),3===e.formEdit.type?a("el-form-item",{attrs:{label:"关联的优惠券",prop:"couponid","label-width":e.formLabelWidth}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择关联的优惠券"},model:{value:e.formEdit.couponid,callback:function(t){e.$set(e.formEdit,"couponid",t)},expression:"formEdit.couponid"}},e._l(e.couponList,function(e,t){return a("el-option",{key:t,attrs:{name:e.name,value:e.couponid,label:e.name}})}))],1):e._e(),e._v(" "),3!==e.formEdit.type?a("el-form-item",{staticClass:"full-item",attrs:{label:"门店范围：","label-width":e.formLabelWidth}},[a("level-mulpite",{attrs:{selectOption:e.schLevelcodeOptions},model:{value:e.formEdit.range_levelcode,callback:function(t){e.$set(e.formEdit,"range_levelcode",t)},expression:"formEdit.range_levelcode"}})],1):e._e(),e._v(" "),a("el-form-item",{staticClass:"full-item",attrs:{label:"活动内容：","label-width":e.formLabelWidth,prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"活动内容"},model:{value:e.formEdit.content,callback:function(t){e.$set(e.formEdit,"content",t)},expression:"formEdit.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片：","label-width":e.formLabelWidth,prop:"des_img_url"}},[a("el-upload",{staticClass:"m-avatar-uploader",attrs:{"on-success":e.handleEditPic,"thumbnail-mode":!0,action:e.APIADDRESS+"/sys/sys/uploadFile","show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.formEdit.des_img_url?a("img",{staticClass:"showImg",attrs:{src:e.baseImgUrl+e.formEdit.des_img_url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.goCancelEdit()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:e.SubmitEdit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},312:function(e,t,a){function r(e){a(1155)}var i=a(17)(a(1057),a(1203),r,"data-v-db042950",null);e.exports=i.exports},808:function(e,t,a){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},809:function(e,t,a){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){for(var t;e.length;){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var r=[],i=0;i<t.length;++i)void 0!==t[i]&&r.push(t[i]);a.obj[a.prop]=r}}return t};t.arrayToObject=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(a[r]=e[r]);return a},t.merge=function(e,a,i){if(!a)return e;if("object"!=typeof a){if(Array.isArray(e))e.push(a);else{if("object"!=typeof e)return[e,a];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,a))&&(e[a]=!0)}return e}if("object"!=typeof e)return[e].concat(a);var o=e;return Array.isArray(e)&&!Array.isArray(a)&&(o=t.arrayToObject(e,i)),Array.isArray(e)&&Array.isArray(a)?(a.forEach(function(a,o){r.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t.merge(e[o],a,i):e.push(a):e[o]=a}),e):Object.keys(a).reduce(function(e,o){var n=a[o];return r.call(e,o)?e[o]=t.merge(e[o],n,i):e[o]=n,e},o)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,a){return e[a]=t[a],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),a="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?a+=t.charAt(r):o<128?a+=i[o]:o<2048?a+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?a+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),a+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return a},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],r=0;r<t.length;++r)for(var i=t[r],n=i.obj[i.prop],l=Object.keys(n),s=0;s<l.length;++s){var d=l[s],c=n[d];"object"==typeof c&&null!==c&&-1===a.indexOf(c)&&(t.push({obj:n,prop:d}),a.push(c))}return o(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},811:function(e,t,a){"use strict";var r=a(817),i=a(816),o=a(808);e.exports={formats:o,parse:i,stringify:r}},812:function(e,t,a){e.exports={default:a(814),__esModule:!0}},814:function(e,t,a){var r=a(21),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},815:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(284),o=r(i),n=a(811),l=(r(n),a(105));o.default.defaults.withCredentials=!0,t.default={post:function(e,t,a,r,i){var n=i;o.default.post(e,t).then(function(e){var t=e.data?e.data:{};if("string"==typeof t)try{t=JSON.parse(t)}catch(e){console.log("json parse error")}return t.result&&0==t.result.resultCode?"function"==typeof a?void a.call(n,t):void 0:t.result&&3==t.result.resultCode?(n.$message.error(t.result.resultMessage),void l.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){location.reload()})):("function"==typeof r&&r.call(n,t),void n.$message.error(t.result.resultMessage))}).catch(function(e){console.log("catch:"+e),n.$message.error("网络出错")})}}},816:function(e,t,a){"use strict";var r=a(809),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},n=function(e,t){for(var a={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,n=t.parameterLimit===1/0?void 0:t.parameterLimit,l=r.split(t.delimiter,n),s=0;s<l.length;++s){var d,c,u=l[s],f=u.indexOf("]="),p=-1===f?u.indexOf("="):f+1;-1===p?(d=t.decoder(u,o.decoder),c=t.strictNullHandling?null:""):(d=t.decoder(u.slice(0,p),o.decoder),c=t.decoder(u.slice(p+1),o.decoder)),i.call(a,d)?a[d]=[].concat(a[d]).concat(c):a[d]=c}return a},l=function(e,t,a){for(var r=t,i=e.length-1;i>=0;--i){var o,n=e[i];if("[]"===n)o=[],o=o.concat(r);else{o=a.plainObjects?Object.create(null):{};var l="["===n.charAt(0)&&"]"===n.charAt(n.length-1)?n.slice(1,-1):n,s=parseInt(l,10);!isNaN(s)&&n!==l&&String(s)===l&&s>=0&&a.parseArrays&&s<=a.arrayLimit?(o=[],o[s]=r):o[l]=r}r=o}return r},s=function(e,t,a){if(e){var r=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,n=/(\[[^[\]]*])/g,s=o.exec(r),d=s?r.slice(0,s.index):r,c=[];if(d){if(!a.plainObjects&&i.call(Object.prototype,d)&&!a.allowPrototypes)return;c.push(d)}for(var u=0;null!==(s=n.exec(r))&&u<a.depth;){if(u+=1,!a.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!a.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+r.slice(s.index)+"]"),l(c,t,a)}};e.exports=function(e,t){var a=t?r.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"==typeof a.delimiter||r.isRegExp(a.delimiter)?a.delimiter:o.delimiter,a.depth="number"==typeof a.depth?a.depth:o.depth,a.arrayLimit="number"==typeof a.arrayLimit?a.arrayLimit:o.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"==typeof a.decoder?a.decoder:o.decoder,a.allowDots="boolean"==typeof a.allowDots?a.allowDots:o.allowDots,a.plainObjects="boolean"==typeof a.plainObjects?a.plainObjects:o.plainObjects,a.allowPrototypes="boolean"==typeof a.allowPrototypes?a.allowPrototypes:o.allowPrototypes,a.parameterLimit="number"==typeof a.parameterLimit?a.parameterLimit:o.parameterLimit,a.strictNullHandling="boolean"==typeof a.strictNullHandling?a.strictNullHandling:o.strictNullHandling,""===e||null===e||void 0===e)return a.plainObjects?Object.create(null):{};for(var i="string"==typeof e?n(e,a):e,l=a.plainObjects?Object.create(null):{},d=Object.keys(i),c=0;c<d.length;++c){var u=d[c],f=s(u,i[u],a);l=r.merge(l,f,a)}return r.compact(l)}},817:function(e,t,a){"use strict";var r=a(809),i=a(808),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Date.prototype.toISOString,l={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return n.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,a,i,o,n,s,d,c,u,f,p,m){var h=t;if("function"==typeof d)h=d(a,h);else if(h instanceof Date)h=f(h);else if(null===h){if(o)return s&&!m?s(a,l.encoder):a;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||r.isBuffer(h)){if(s){return[p(m?a:s(a,l.encoder))+"="+p(s(h,l.encoder))]}return[p(a)+"="+p(String(h))]}var v=[];if(void 0===h)return v;var g;if(Array.isArray(d))g=d;else{var y=Object.keys(h);g=c?y.sort(c):y}for(var b=0;b<g.length;++b){var _=g[b];n&&null===h[_]||(v=Array.isArray(h)?v.concat(e(h[_],i(a,_),i,o,n,s,d,c,u,f,p,m)):v.concat(e(h[_],a+(u?"."+_:"["+_+"]"),i,o,n,s,d,c,u,f,p,m)))}return v};e.exports=function(e,t){var a=e,n=t?r.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var d=void 0===n.delimiter?l.delimiter:n.delimiter,c="boolean"==typeof n.strictNullHandling?n.strictNullHandling:l.strictNullHandling,u="boolean"==typeof n.skipNulls?n.skipNulls:l.skipNulls,f="boolean"==typeof n.encode?n.encode:l.encode,p="function"==typeof n.encoder?n.encoder:l.encoder,m="function"==typeof n.sort?n.sort:null,h=void 0!==n.allowDots&&n.allowDots,v="function"==typeof n.serializeDate?n.serializeDate:l.serializeDate,g="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:l.encodeValuesOnly;if(void 0===n.format)n.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,n.format))throw new TypeError("Unknown format option provided.");var y,b,_=i.formatters[n.format];"function"==typeof n.filter?(b=n.filter,a=b("",a)):Array.isArray(n.filter)&&(b=n.filter,y=b);var w=[];if("object"!=typeof a||null===a)return"";var A;A=n.arrayFormat in o?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var E=o[A];y||(y=Object.keys(a)),m&&y.sort(m);for(var k=0;k<y.length;++k){var x=y[k];u&&null===a[x]||(w=w.concat(s(a[x],x,E,c,u,f?p:null,b,m,h,v,_,g)))}var L=w.join(d),C=!0===n.addQueryPrefix?"?":"";return L.length>0?C+L:""}},818:function(e,t,a){"use strict";function r(e,t){var a=JSON.parse((0,h.default)(e));for(var r in t)a[t[r]]=a[t[r]].join(",");return a}function i(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null}function o(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function n(e,t){for(var a in t)e[t[a]]=o(e[t[a]]);return e}function l(e,t){if(e){var a=JSON.parse((0,h.default)(e));if(a=a.split(","),""===a[a.length-1]&&a.pop(),"number"===t)for(var r in a)a[r]=parseInt(a[r]);return a}return[]}function s(e){if(!e)return[];var t=e.split("/"),a=[];return t.pop(),t.forEach(function(e){a.push(a[a.length-1]?a[a.length-1]+e+"/":e+"/")}),a}function d(e){if(!e)return"";var t=e.split("/");return t.length>2&&t.splice(-2,1),t.join("/")}function c(){Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}}function u(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),i=e.getHours(),o=e.getMinutes(),n=t+"-";return a<10&&(n+="0"),n+=a+"-",r<10&&(n+="0"),n+=r+" ",i<10&&(n+="0"),n+=i+":",o<10&&(n+="0"),n+=o}function f(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),i=t+"-";return a<10&&(i+="0"),i+=a+"-",r<10&&(i+="0"),i+=r+" ",i+="00:00:00"}function p(e,t,a){e=e.replace(/\-/g,"/"),t=t.replace(/\-/g,"/"),a=a.toLowerCase();var r=new Date(e),i=new Date(t),o=1;switch(a){case"second":o=1e3;break;case"minute":o=6e4;break;case"hour":o=36e5;break;case"day":o=864e5}return parseInt((i.getTime()-r.getTime())/parseInt(o))}Object.defineProperty(t,"__esModule",{value:!0});var m=a(812),h=function(e){return e&&e.__esModule?e:{default:e}}(m);t.dataTranstion=r,t.GetQueryString=i,t.trim=o,t.trimFun=n,t.split=l,t.levelcodeToArray=s,t.levelcodeToParent=d,t.formatDate=c,t.CurentTime=u,t.CurentTimeStart=f,t.GetDateDiff=p},829:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,v.default)({url:y.default+"/activitity/coupon/list",method:"post",params:e})}function o(e){return(0,v.default)({url:y.default+"/activitity/coupon/add",method:"post",params:e})}function n(e){return(0,v.default)({url:y.default+"/activitity/coupon/update",method:"post",params:e})}function l(e){return(0,v.default)({url:y.default+"/activitity/coupon/cancel",method:"post",params:e})}function s(e){return(0,v.default)({url:y.default+"/activitity/coupon/delete",method:"post",params:e})}function d(e){return(0,v.default)({url:y.default+"/activitity/coupon/getCouponByMode",method:"post",params:e})}function c(e){return(0,v.default)({url:y.default+"/activitity/rechargeSetting/list",method:"post",params:e})}function u(e){return(0,v.default)({url:y.default+"/activitity/rechargeSetting/add",method:"post",params:e})}function f(e){return(0,v.default)({url:y.default+"/activitity/rechargeSetting/update",method:"post",params:e})}function p(e){return(0,v.default)({url:y.default+"/activitity/rechargeSetting/delete",method:"post",params:e})}function m(e){return(0,v.default)({url:y.default+"/activitity/rechargeSetting/detail",method:"post",params:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.ActivitityCouponList=i,t.ActivitityCouponAdd=o,t.ActivitityCouponUpdate=n,t.ActivitityCouponCancel=l,t.ActivitityCouponDelete=s,t.GetCouponByMode=d,t.RechargeList=c,t.RechargeAdd=u,t.RechargeUpdate=f,t.RechargeDelete=p,t.RechargeDetail=m;var h=a(282),v=r(h),g=a(281),y=r(g)}});