webpackJsonp([31],{1134:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(297),s=r(o),i=a(868),u=a(108),d=r(u);a(861);e.default={components:{DetailList:d.default},data:function(){var t=this;return{filterData:[{key:"phone",type:"input",placeholder:"客户电话"},{key:"status",type:"radio",option:[{key:0,value:"未处理"},{key:1,value:"处理完成"}]}],filterParams:{phone:"",status:""},tableList:[{key:"payid",value:"订单编号"},{key:"orgname",value:"所属门店"},{key:"platenumber",value:"车牌号"},{key:"real_name",value:"客户姓名"},{key:"phone",value:"客户电话"},{key:"price_total",value:"支付总额（元）"},{key:"price_pay",value:"实际支付（元）"},{key:"add_price",value:"额外费用"},{key:"status",value:"订单状态",type:"dot",start:1,name:["待取车","待还车","待缴费","已缴费结束","取消结束"],color:["blue","orange","red","green","gray"]},{key:"pay_status",value:"支付状态",type:"dot",start:0,name:["待支付","支付中","支付成功"],color:["red","blue","green"]},{key:"urgentstatus",value:"处理状态",type:"dot",start:0,name:["未处理","处理完成"],color:["red","green"]}],keyword:{},opreat:[{type:"detail",name:"详情",roles:!1,click:function(e,a){t.detail(e,a)}},{type:"edit",name:"处理",roles:!1,statue:[0],status:"urgentstatus",click:function(e,a){t.edit(e,a)}}],pageParams:{rows:15,page:1},otherList:[{key:"memo",value:"取消原因"},{key:"paytype",value:"支付途径"},{key:"create_time",value:"生成时间"},{key:"fetch_time",value:"取车时间"},{key:"return_time",value:"还车时间"},{key:"begin_km",value:"开始里程",filter:function(t){return t+"km"}},{key:"current_km",value:"当前里程",filter:function(t){return t+"km"}},{key:"price_discount",value:"折扣价格",filter:function(t){return t+"元"}},{key:"position_start_chn",value:"提车地点"},{key:"position_end_chn",value:"还车地点"},{key:"stop_station_fee",value:"异店还车额外费用",disabled:!0},{key:"stopstationstatus",value:"是否异店还车",disabled:!0},{key:"urgentprice",value:"紧急还车价格"},{key:"checkpics",value:"检查提醒的图片",type:"image",disabled:!0,imageData:[{key:"type",value:"图片类别"}]}],detailDialog:!1,dialogForm:!1,urgentstatueList:["未处理","处理完成"],payTypeList:["微信","支付宝"],payTypeIcon:["&#xe673;","&#xe6a1;"],statueList:["待取车","待还车","待缴费","已缴费结束","取消结束"],paystatueList:["待支付","支付中","支付成功"],superSearch:!1,params:{rows:15,page:1,status:"",phone:""},detialDic:[{key:"payid",value:"订单编号"},{key:"orgname",value:"所属门店"},{key:"platenumber",value:"车牌号"},{key:"real_name",value:"客户姓名"},{key:"phone",value:"客户电话"},{key:"price_total",value:"支付总额(元)"},{key:"price_pay",value:"实际支付(元)"},{key:"orderstatus",value:"订单状态"},{key:"paystatus",value:"支付状态"},{key:"add_price",value:"紧急还车"},{key:"invoicestatue",value:"发票状态"},{key:"paytype",value:"支付途径"},{key:"create_time",value:"生成时间"},{key:"fetch_time",value:"取车时间"},{key:"return_time",value:"还车时间"},{key:"begin_km",value:"开始里程"},{key:"current_km",value:"当前里程"},{key:"price_discount",value:"折扣价格"},{key:"position_start_chn",value:"提车地点"},{key:"position_end_chn",value:"还车地点"},{key:"stop_station_fee",value:"异店还车额外费用"},{key:"stopstationstatus",value:"是否异店还车",disabled:!0},{key:"operation_name",value:"操作人"},{key:"urgent_order_update_time",value:"操作时间"},{key:"urgent_order_memo",value:"备注"},{key:"checkpics",value:"检查提醒的图片",type:"image",disabled:!0,imageData:[{key:"type",value:"图片类别"}]}],tableData:[],total:0,detailData:[],btnLoading:!1,form:{urgent_id:"",memo:"",add_price:""},formData:[{key:"add_price",value:"额外费用"},{key:"memo",value:"备注"}],rules:{add_price:[{required:!0,message:"请输入额外费用",trigger:"blur"},{pattern:/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,message:"请输入正确的金额",trigger:"blur"}]},orderCircle:null,circleData:[{key:"type",value:"操作类型"},{key:"operator",value:"操作人员"},{key:"statue",value:"订单状态"},{key:"time",value:"操作时间"}],roles:{}}},mounted:function(){this.getList(),this.rolesMethod()},methods:{rolesMethod:function(){var t=this;t.$store.dispatch("checkApi",["/order/urgentOrder/detail","/order/urgentOrder/finish"]).then(function(e){for(var a in e)t.opreat[a].roles=e[a]})},submit:function(){var t=this;t.$refs.form.validate(function(e){e&&(t.btnLoading=!0,(0,i.urgentOrderFinish)(t.form).then(function(e){t.$message({message:"恭喜，处理成功！",type:"success"}),t.dialogForm=!1,t.getList(),t.btnLoading=!1}).catch(function(e){t.btnLoading=!1,t.$message.error(e)}))})},reForm:function(){for(var t in this.form)this.form[t]=""},pageChange:function(t,e){this.pageParams.rows=t,this.pageParams.page=e,this.getList()},search:function(){this.keyword={};var t=["rows","page"];for(var e in this.filterParams)this.filterParams[e]&&t.indexOf(e)<0&&(this.keyword[e]=this.filterParams[e]);this.getList()},getList:function(){var t=this;(0,i.urgentOrderList)((0,s.default)(t.filterParams,t.pageParams)).then(function(e){var a=e.data.entity;t.tableData=a.list,t.total=e.data.entity.totalRow})},detail:function(t,e){var a=this;(0,i.urgentOrderDetail)({urgent_id:e.urgent_id}).then(function(t){a.detailData=t.data.entity,a.detailDialog=!0,a.detailData.operation_name=e.operation_name,a.detailData.operation_time=e.operation_time,a.detailData.add_price=e.add_price}).catch(function(t){a.$message.error(t)}),(0,i.orderCycle)({orderid:e.orderid}).then(function(t){a.orderCircle=t.data.entity}).catch(function(t){a.$message.error(t)})},edit:function(t,e){this.reForm(),this.form.urgent_id=e.urgent_id,this.dialogForm=!0}}}},1152:function(t,e,a){e=t.exports=a(845)(!1),e.push([t.i,".orderList .dialog-form .el-form-item[data-v-04061b1c]{width:47.5%;float:left}.orderList .dialog-form .el-form-item[data-v-04061b1c]:nth-child(odd){margin-right:5%}.orderList .pay_type[data-v-04061b1c]{font-size:12px}.orderList .pay_type .iconfont[data-v-04061b1c]{margin-right:3px;position:relative;top:3px}.orderList .pay_type.pay_typenull .iconfont[data-v-04061b1c]{display:none}.orderList .pay_type.statue1 .iconfont[data-v-04061b1c],.orderList .pay_type.statue1[data-v-04061b1c]{color:#00a854}.orderList .pay_type.statue2 .iconfont[data-v-04061b1c],.orderList .pay_type.statue2[data-v-04061b1c]{color:#108ee9}.orderList .status[data-v-04061b1c]{font-size:12px}.orderList .status .dot[data-v-04061b1c]{width:6px;height:6px;background-color:#d81f21;border-radius:50%;display:inline-block;position:relative;top:-2px;margin-right:3px}.orderList .status.statusnull .dot[data-v-04061b1c]{display:none}.orderList .status.statue1[data-v-04061b1c]{color:#108ee9}.orderList .status.statue1 .dot[data-v-04061b1c]{background-color:#108ee9}.orderList .status.statue2[data-v-04061b1c]{color:#108ee9}.orderList .status.statue2 .dot[data-v-04061b1c]{background-color:#108ee9}.orderList .status.statue3[data-v-04061b1c]{color:#f07023}.orderList .status.statue3 .dot[data-v-04061b1c]{background-color:#f07023}.orderList .status.statue4[data-v-04061b1c]{color:#00a854}.orderList .status.statue4 .dot[data-v-04061b1c]{background-color:#00a854}.orderList .status.statue5[data-v-04061b1c]{color:#999}.orderList .status.statue5 .dot[data-v-04061b1c]{background-color:#999}.orderList .urgentstatus[data-v-04061b1c]{font-size:12px}.orderList .urgentstatus .dot[data-v-04061b1c]{width:6px;height:6px;background-color:#d81f21;border-radius:50%;display:inline-block;position:relative;top:-2px;margin-right:3px}.orderList .urgentstatus.statuenull .dot[data-v-04061b1c]{display:none}.orderList .urgentstatus.statue0[data-v-04061b1c]{color:#f04134}.orderList .urgentstatus.statue0 .dot[data-v-04061b1c]{background-color:#f04134}.orderList .urgentstatus.statue1[data-v-04061b1c]{color:#00a854}.orderList .urgentstatus.statue1 .dot[data-v-04061b1c]{background-color:#00a854}.orderList .orderstatue[data-v-04061b1c],.orderList .pay_status[data-v-04061b1c]{font-size:12px}.orderList .orderstatue .dot[data-v-04061b1c],.orderList .pay_status .dot[data-v-04061b1c]{width:6px;height:6px;background-color:#d81f21;border-radius:50%;display:inline-block;position:relative;top:-2px;margin-right:3px}.orderList .orderstatue.statuenull .dot[data-v-04061b1c],.orderList .pay_status.statuenull .dot[data-v-04061b1c]{display:none}.orderList .orderstatue.statue0[data-v-04061b1c],.orderList .pay_status.statue0[data-v-04061b1c]{color:#f04134}.orderList .orderstatue.statue0 .dot[data-v-04061b1c],.orderList .pay_status.statue0 .dot[data-v-04061b1c]{background-color:#f04134}.orderList .orderstatue.statue1[data-v-04061b1c],.orderList .pay_status.statue1[data-v-04061b1c]{color:#108ee9}.orderList .orderstatue.statue1 .dot[data-v-04061b1c],.orderList .pay_status.statue1 .dot[data-v-04061b1c]{background-color:#108ee9}.orderList .orderstatue.statue2[data-v-04061b1c],.orderList .pay_status.statue2[data-v-04061b1c]{color:#00a854}.orderList .orderstatue.statue2 .dot[data-v-04061b1c],.orderList .pay_status.statue2 .dot[data-v-04061b1c]{background-color:#00a854}.orderList .orderstatue.statue1[data-v-04061b1c]{color:#108ee9}.orderList .orderstatue.statue1 .dot[data-v-04061b1c]{background-color:#108ee9}.orderList .orderstatue.statue2[data-v-04061b1c]{color:#f07023}.orderList .orderstatue.statue2 .dot[data-v-04061b1c]{background-color:#f07023}.orderList .orderstatue.statue3[data-v-04061b1c]{color:#f04134}.orderList .orderstatue.statue3 .dot[data-v-04061b1c]{background-color:#f04134}.orderList .orderstatue.statue4[data-v-04061b1c]{color:#00a854}.orderList .orderstatue.statue4 .dot[data-v-04061b1c]{background-color:#00a854}.orderList .orderstatue.statue5[data-v-04061b1c]{color:#999}.orderList .orderstatue.statue5 .dot[data-v-04061b1c]{background-color:#999}",""])},1190:function(t,e,a){var r=a(1152);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(846)("46f14331",r,!0,{})},1233:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderList"},[a("lg-preview"),t._v(" "),a("m-filter",{attrs:{data:t.filterData,form:t.filterParams},on:{search:t.search}}),t._v(" "),a("m-table",{attrs:{tableData:t.tableData,opreatWidth:110,showOther:!1,otherList:t.otherList,tableList:t.tableList,localName:"urgentOrder_table",keyword:t.keyword,opreat:t.opreat,total:t.total},on:{pageChange:t.pageChange}}),t._v(" "),a("el-dialog",{staticClass:"detail-dialog",attrs:{visible:t.dialogForm},on:{"update:visible":function(e){t.dialogForm=e}}},[a("h2",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont c-blue"},[t._v("")]),t._v("紧急还车处理")]),t._v(" "),a("div",{staticClass:"m-t-20"}),t._v(" "),a("el-form",{ref:"form",staticClass:"dialog-form clearfix",attrs:{rules:t.rules,model:t.form}},t._l(t.formData,function(e,r){return a("el-form-item",{key:r,attrs:{prop:e.key,label:e.value,"label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入"+e.value},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:"form[item.key]"}})],1)})),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogForm=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"detail-dialog",attrs:{visible:t.detailDialog},on:{"update:visible":function(e){t.detailDialog=e}}},[a("h2",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a("i",{staticClass:"iconfont c-blue"},[t._v("")]),t._v("紧急订单详情")]),t._v(" "),a("DetailList",{staticStyle:{"padding-top":"10px"},attrs:{labelWidth:"120px",dictionary:t.detialDic,data:t.detailData},on:{"update:dictionary":function(e){t.detialDic=e}}}),t._v(" "),a("h3",{staticClass:"dialog-sub-title m-b-10 m-t-10 f-14"},[t._v("订单生命周期：")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderCircle}},t._l(t.circleData,function(e,r){return a("el-table-column",{key:r,attrs:{label:e.value},scopedSlots:t._u([{key:"default",fn:function(r){return["statue"===e.key?a("div",{staticClass:"orderstatue",class:["statue"+r.row[e.key]]},[a("i",{staticClass:"dot"}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(t.statueList[r.row[e.key]-1]))])]):"type"===e.key?a("div",{staticClass:"type",class:["statue"+r.row[e.key]]},[a("span",{staticClass:"text"},[t._v(t._s(2===r.row[e.key]?"后台操作人员":"本人"))])]):"operator"===e.key?a("div",{staticClass:"operator",class:["statue"+r.row[e.key]]},[a("span",{staticClass:"text"},[t._v(t._s(r.row[e.key]?r.row[e.key]:"本人"))])]):a("el-tooltip",{attrs:{effect:"dark",content:r.row[e.key]+"",placement:"top"}},[a("span",{staticClass:"text-over"},[t._v(t._s(r.row[e.key]))])])]}}])})}))],1)],1)},staticRenderFns:[]}},341:function(t,e,a){function r(t){a(1190)}var o=a(17)(a(1134),a(1233),r,"data-v-04061b1c",null);t.exports=o.exports},855:function(t,e,a){t.exports={default:a(858),__esModule:!0}},858:function(t,e,a){var r=a(26);t.exports=function(t){return(r.JSON&&r.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},861:function(t,e,a){"use strict";function r(t,e){var a=JSON.parse((0,f.default)(t));for(var r in e)a[e[r]]=a[e[r]].join(",");return a}function o(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}function s(t){return t.replace(/(^\s*)|(\s*$)/g,"")}function i(t,e){for(var a in e)t[e[a]]=s(t[e[a]]);return t}function u(t,e){if(t){var a=JSON.parse((0,f.default)(t));if(a=a.split(","),""===a[a.length-1]&&a.pop(),"number"===e)for(var r in a)a[r]=parseInt(a[r]);return a}return[]}function d(t){if(!t)return[];var e=t.split("/"),a=[];return e.pop(),e.forEach(function(t){a.push(a[a.length-1]?a[a.length-1]+t+"/":t+"/")}),a}function n(t){if(!t)return"";var e=t.split("/");return e.length>2&&e.splice(-2,1),e.join("/")}function l(){Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t}}function c(){var t=new Date,e=t.getMonth()+1,a=t.getDate()+1;return e>=1&&e<=9&&(e="0"+e),a>=0&&a<=9&&(a="0"+a),t.getFullYear()+"-"+e+"-"+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}Object.defineProperty(e,"__esModule",{value:!0});var p=a(855),f=function(t){return t&&t.__esModule?t:{default:t}}(p);e.dataTranstion=r,e.GetQueryString=o,e.trim=s,e.trimFun=i,e.split=u,e.levelcodeToArray=d,e.levelcodeToParent=n,e.formatDate=l,e.getNowFormatDate=c},868:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(0,x.default)({url:w.default+"/order/order/list",method:"get",params:t})}function s(t){return(0,x.default)({url:w.default+"/order/order/cancel",method:"get",params:t})}function i(t){return(0,x.default)({url:w.default+"/order/order/detail",method:"get",params:t})}function u(t){return(0,x.default)({url:w.default+"/order/order/getOrderCycle",method:"get",params:t})}function d(t){return(0,x.default)({url:w.default+"/order/urgentOrder/list",method:"get",params:t})}function n(t){return(0,x.default)({url:w.default+"/order/urgentOrder/finish",method:"get",params:t})}function l(t){return(0,x.default)({url:w.default+"/order/urgentOrder/detail",method:"get",params:t})}function c(t){return(0,x.default)({url:w.default+"/finance/invoice/list",method:"get",params:t})}function p(t){return(0,x.default)({url:w.default+"/finance/invoice/detail",method:"get",params:t})}function f(t){return(0,x.default)({url:w.default+"/finance/invoice/makeInvoice",method:"get",params:t})}function v(t){return(0,x.default)({url:w.default+"/finance/invoice/voidInvoice",method:"get",params:t})}function g(t){return(0,x.default)({url:w.default+"/order/evaluate/list",method:"get",params:t})}function y(t){return(0,x.default)({url:w.default+"/balance/refund/list",method:"post",params:t})}function m(t){return(0,x.default)({url:w.default+"/balance/refund/add",method:"post",params:t})}function b(t){return(0,x.default)({url:w.default+"/balance/refund/update",method:"post",params:t})}function h(t){return(0,x.default)({url:w.default+"/order/order/returnCar",method:"post",params:t})}function k(t){return(0,x.default)({url:w.default+"/customer/representation/add",method:"post",params:t})}function _(t){return(0,x.default)({url:w.default+"/order/evaluate/reply",method:"post",params:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.orderList=o,e.orderCancel=s,e.orderDetail=i,e.orderCycle=u,e.urgentOrderList=d,e.urgentOrderFinish=n,e.urgentOrderDetail=l,e.invoiceList=c,e.invoiceDetail=p,e.invoiceMake=f,e.invoiceVoid=v,e.evaluateList=g,e.refundList=y,e.refundAdd=m,e.refundUpdate=b,e.returnCar=h,e.repreAdd=k,e.evaluateReply=_;var L=a(296),x=r(L),D=a(295),w=r(D)}});